package main

import (
	"net/http"

	"github.com/Zbyteio/zbyte-sso-verify-go/middleware"
	"github.com/gin-gonic/gin"
)

func main() {
	srv := gin.Default()
	srv.GET("/a", func(ctx *gin.Context) {
		access_token := "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJra05EQW9YamEyZFFEUDZYY3FLV3h0akJ2b2NXVVZzV0VRVFZBdWZwdmVzIn0.eyJleHAiOjE2NzcyMjEwNDMsImlhdCI6MTY3NzIyMDE0MywiYXV0aF90aW1lIjoxNjc2NjE1MjQ4LCJqdGkiOiJhMTcwNDViMS05ZTVhLTQ2NWMtODgwYi04OWJmYjU1NGRhOWYiLCJpc3MiOiJodHRwczovL2RwbGF0ZGV2LnpieXRlLmlvL2tjL3JlYWxtcy9jb21tdW5pdHkiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiMGQ1OGFhNTAtZWQ0ZS00MTAwLWE3OWQtOTgwNDg1ZjA1YWM0IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiemJ5dGUtbGNuYy1hcHAiLCJzZXNzaW9uX3N0YXRlIjoiODU4YzQzMjktYThiMy00MWQzLTkxNGQtNWY3Y2M1NGI2MGYwIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL2RwbGF0dGVzdC56Ynl0ZS5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCIsImh0dHBzOi8vZGV2LnpieXRlLmlvIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsImRlZmF1bHQtcm9sZXMtY29tbXVuaXR5IiwiZGV2ZWxvcGVyIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6ImVtYWlsIHByb2ZpbGUgb3BlbmlkIG9mZmxpbmVfYWNjZXNzIiwic2lkIjoiODU4YzQzMjktYThiMy00MWQzLTkxNGQtNWY3Y2M1NGI2MGYwIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJhZGRyZXNzIjp7fSwibmFtZSI6InNvdXJhYmggbWFuZGFsIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiMTltYW5kYWw5N0BnbWFpbC5jb20iLCJnaXZlbl9uYW1lIjoic291cmFiaCIsImZhbWlseV9uYW1lIjoibWFuZGFsIiwiZW1haWwiOiIxOW1hbmRhbDk3QGdtYWlsLmNvbSJ9.bvBK_LuOCToH2U0olhJeNhqWaKwyGDMpAu4MqeSiokFw65BedDd_NH-SjlXISvAOc8m6o6h9GI0HPQ6ZpXtPTZnE3VWms5LdK6Magv5aeoe-XE-wd2FQ2X-Z0iLGa_rOISeeC68l5mytnXKKtuikcnu3cAnb8DTW5y7CwC02Sqc4Wm-IdUACv0AOVVv2DFy-WeWZTDLMAaq6PGbyKv1qy_Qlpfnmz1-5qGs4zt6oTtcKHptXr2YcDzF1cbCIHa_kw6OpGrmv15zaK87J-Zs2X5Ynl_pFZRX_HQqJQ48QU4pYhyPcpKGfiCW5FqKxmPG-pZHIBdlK0MNFBlyLOFDa2g"

		isValid, err := middleware.MiddlewareHandler.verifyOnline(access_token, "https://appdev.zbyte.io/keycloak-poc.zbyte.io/kc", "zbyte-lcnc-app", "FNkr8isfh8FhFFBigSrRTGQxrSGWw4YV")
		if err != nil {
			ctx.JSON(http.StatusBadRequest, gin.H{
				"error": err.Error(),
			})
			return
		}
		ctx.JSON(http.StatusAccepted, isValid)
	})
}
